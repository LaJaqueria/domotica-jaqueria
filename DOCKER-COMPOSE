
version: '2'
    
networks: 
  my-network: 
    driver: bridge
services: 
  openldap: 
    image: bitnami/openldap:2
    ports: 
      - '1389:1389'
      - '1636:1636'
    environment: 
      - LDAP_ADMIN_USERNAME=admin
      - LDAP_ADMIN_PASSWORD=adminpassword
      - LDAP_USERS=user01,user02
      - LDAP_PASSWORDS=password1,password2
      - LDAP_DOMAIN=lajaqueria.org
      - "LDAP_BASE_DN=dc=lajaqueria,dc=org"
    networks: 
      - my-network
    volumes: 
      - '/home/administrador/ldap:/bitnami/openldap'
      
  homeassistant: 
    container_name: homeassistant
    image: homeassistant/home-assistant:stable
    ports: 
      - '8123:8123'
    volumes: 
      - /PATH_TO_YOUR_CONFIG:/home/administrador/homeassistant
      - /etc/localtime:/etc/localtime:ro
    restart: unless-stopped
    network_mode: host 
  phpldapadmin: 
    container_name: phpldapadmin
    image: rschaeuble/phpldapadmin
    environment: 
      - PHPLDAPADMIN_LDAP_HOSTS: "openldap"
      - PHPLDAPADMIN_HTTPS: "false"
      #LDAP_URL ldap://openldap
      - LDAP_BASE: dc=lajaqueria,dc=org
      - LDAP_ADMIN: cn=admin,dc=lajaqueria,dc=org
      - ENV LDAP_CERTS: /data/ldap-server-certificate.crt
    ports: 
     - "80:80"
    depends_on: 
      - openldap
    networks: 
      - my-network
